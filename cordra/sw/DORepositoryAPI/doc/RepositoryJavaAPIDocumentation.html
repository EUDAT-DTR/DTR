<html><head><title>Repository Java API Documentation</title><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol{margin:0;padding:0}.c10{max-width:468pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt}.c0{color:inherit;text-decoration:inherit}.c2{font-size:8pt;font-family:"Courier New"}.c3{color:#1155cc;text-decoration:underline}.c5{color:#ff0000}.c4{height:16pt}.c7{margin-left:36pt}.c6{height:11pt}.c8{margin-left:18pt}.c1{direction:ltr}.c9{text-indent:36pt}.title{padding-top:0pt;line-height:1.15;text-align:left;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt}.subtitle{padding-top:0pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt}h2{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h3{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h4{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt}h5{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}h6{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}</style></head><body class="c10"><p class="c1 title"><a name="h.tolggn6vwc47"></a><span>CNRI Repository API Documentation</span></p><p class="c1"><span>Version 1.0 October 31st 2013</span></p><h1 class="c4 c1"><a name="h.r2rtflqaejsj"></a></h1><hr style="page-break-before:always;display:none;"><h1 class="c1 c4"><a name="h.4n7odoocwk63"></a></h1><h1 class="c1"><a name="h.19wgl7cxzywk"></a><span>Table of Contents</span></h1><p class="c6 c1"><span></span></p><p class="c1 c8"><span class="c3"><a class="c0" href="#h.jf07073dcfxn">API Jar file</a></span></p><p class="c8 c1"><span class="c3"><a class="c0" href="#h.n7nru1x7ld33">Making a connection to the repository</a></span></p><p class="c7 c1"><span class="c3"><a class="c0" href="#h.rg5hkf571oqg">Secret key/password based authentication</a></span></p><p class="c7 c1"><span class="c3"><a class="c0" href="#h.fo0g3w57emc4">Private key based authentication</a></span></p><p class="c8 c1"><span class="c3"><a class="c0" href="#h.2xtch4gto1n">Creating a Digital Object</a></span></p><p class="c8 c1"><span class="c3"><a class="c0" href="#h.wj427zy4x5xf">Editing a Digital Object</a></span></p><p class="c8 c1"><span class="c3"><a class="c0" href="#h.55nsqs42ifv5">Deleting a Digital Object</a></span></p><p class="c8 c1"><span class="c3"><a class="c0" href="#h.8o3c18c96d1o">Storing a File in a Digital Object</a></span></p><p class="c8 c1"><span class="c3"><a class="c0" href="#h.b7xrrexj1w9l">Reading a File from a Digital Object</a></span></p><p class="c8 c1"><span class="c3"><a class="c0" href="#h.ofrf6lzcfkh">Searching the Repository</a></span></p><p class="c7 c1"><span class="c3"><a class="c0" href="#h.mt0lonlieda3">AttributeQuery</a></span></p><p class="c1 c7"><span class="c3"><a class="c0" href="#h.xys20vquevzo">BooleanQuery</a></span></p><p class="c7 c1"><span class="c3"><a class="c0" href="#h.6tf3ukskrvab">RawQuery</a></span></p><p class="c7 c1"><span class="c3"><a class="c0" href="#h.pdvdutci57">Nested Queries</a></span></p><p class="c7 c1"><span class="c3"><a class="c0" href="#h.htxloyihoiqi">ElementAttributeQuery</a></span></p><p class="c7 c1"><span class="c3"><a class="c0" href="#h.p42rommhzr8y">QueryParams</a></span></p><p class="c6 c1"><span></span></p><h1 class="c4 c1"><a name="h.z01bq0lma1yj"></a></h1><hr style="page-break-before:always;display:none;"><h1 class="c4 c1"><a name="h.w851lroblqw7"></a></h1><h1 class="c1"><a name="h.jf07073dcfxn"></a><span>API Jar file</span></h1><p class="c1"><span>The API described in this document is contained in the dorepository-api-1.0.jar file. Add this file as well as do.jar to your project&#39;s build path.</span></p><h1 class="c1"><a name="h.n7nru1x7ld33"></a><span>Making a connection to the repository</span></h1><p class="c1"><span>In order to make a connection to the repository server you need an instance of NetworkedRepository. There are a number of different NetworkedRepository constructors available. They vary based on the method of authentication used. The simplest approach is to use secret key based authentication. This allows you to connect to a repository server without having to create a user handle in the Handle System, instead a username and password can be specified in the password.dct file. </span></p><h2 class="c1"><a name="h.rg5hkf571oqg"></a><span>Secret key/password based authentication</span></h2><p class="c6 c1"><span></span></p><p class="c1"><span class="c2">String repoHandle = &quot;cnri.test/repo&quot;;</span></p><p class="c1"><span class="c2">String host = &quot;10.0.1.4&quot;;</span></p><p class="c1"><span class="c2">int port = 9900;</span></p><p class="c1"><span class="c2">byte[] pubKeyBytes = getPubKeyBytes(&quot;keys/testserver/publickey&quot;);</span></p><p class="c1"><span class="c2">String userHandle = &quot;cnri.test/admin&quot;;</span></p><p class="c1"><span class="c2">byte[] userPassword = &quot;password&quot;.getBytes();</span></p><p class="c1"><span class="c2">Repository repository = </span></p><p class="c1 c9"><span class="c2">new NetworkedRepository(repoHandle, host, port, pubKeyBytes, userHandle, userPassword);</span></p><p class="c6 c1"><span></span></p><p class="c1"><span>The repoHandle needs to match the value of the serviceid field in the server config.dct file.</span></p><p class="c6 c1"><span></span></p><p class="c1"><span>The pubKeyBytes are the bytes from the publickey file in the server directory. This public key represents the identity of the repository and is used by the client to authenticate the server. </span></p><p class="c6 c1"><span></span></p><p class="c1"><span>The userHandle and userPassword can be stored in the password.dct file in the server directory. An example password.dct file is shown here:</span></p><p class="c6 c1"><span class="c2"></span></p><p class="c1"><span class="c2">{</span></p><p class="c1 c9"><span class="c2">&quot;cnri.test/admin&quot;=&quot;password&quot;</span></p><p class="c1"><span class="c2">}</span></p><p class="c6 c1"><span class="c2"></span></p><p class="c1"><span>Alternatively userHandle can refer to a handle in the Handle System that contains an HS_SECKEY handle value. </span><span>In which case the password must be the value of that HS_SECKEY.</span></p><h2 class="c1"><a name="h.fo0g3w57emc4"></a><span>Private key based authentication</span></h2><p class="c1"><span>Authentication can also be carried out using the public/private key pair of a Handle System user. The public key of the user needs to be stored in an HS_PUBKEY handle value in the Handle System. </span></p><p class="c6 c1"><span></span></p><p class="c1"><span class="c2">String repoHandle = &quot;cnri.test/repo&quot;;</span></p><p class="c1"><span class="c2">String host = &quot;10.0.1.4&quot;;</span></p><p class="c1"><span class="c2">int port = 9900;</span></p><p class="c1"><span class="c2">byte[] pubKeyBytes = getPubKeyBytes(&quot;keys/testserver/publickey&quot;);</span></p><p class="c1"><span class="c2">String userHandle = &quot;cnri.test/admin&quot;;</span></p><p class="c1"><span class="c2">String privateKeyFilePath = &quot;keys/adminPrivateKey&quot;;</span></p><p class="c1"><span class="c2">String passphrase = &quot;passphrase&quot;;</span></p><p class="c1"><span class="c2">repository = NetworkedRepository(repoHandle, host, port, pubKeyBytes, userHandle,</span></p><p class="c1 c9"><span class="c2">privateKeyFilePath, passphrase);</span></p><p class="c6 c1"><span></span></p><p class="c1"><span>Supply the path to the locally stored private key. The private key can optionally be encrypted with a passphrase. If the private key is not encrypted the passphrase can be null.</span></p><p class="c6 c1"><span></span></p><p class="c1"><span>For other ways of instantiating a NetworkedRepository please see the java doc.</span></p><h1 class="c1"><a name="h.2xtch4gto1n"></a><span>Creating a Digital Object</span></h1><p class="c1"><span class="c2">DigitalObject object1 = new repository.createDigitalObject(&quot;userDefinedObjectId&quot;);</span></p><p class="c6 c1"><span></span></p><p class="c1"><span>Alternatively you can pass null as the id of the Digital Object to be assigned the next available id.</span></p><p class="c1"><span class="c2">DigitalObject object1 = new repository.createDigitalObject(null);</span></p><h1 class="c1"><a name="h.wj427zy4x5xf"></a><span>Editing a Digital Object</span></h1><p class="c1"><span>A Digital Object contains a map of attributes where the key and value are Strings. Attributes are written with the setAttribute method and read with the getAttribute method.</span></p><p class="c6 c1"><span class="c2"></span></p><p class="c1"><span class="c2">object1.setAttribute(&quot;attributeName&quot;, &quot;attributeValue&quot;);</span></p><p class="c1"><span class="c2">String value = object1.getAttribute(&quot;attributeName&quot;);</span></p><p class="c6 c1"><span></span></p><p class="c1"><span>Each call to setAttribute writes directly through to the remote server. It is sometimes desirable to write a set of attributes as a single atomic operation. This can be done by creating a Map&lt;String, String&gt;, setting the desired values on the map and then passing it to the setAttributes method.</span></p><p class="c6 c1"><span></span></p><p class="c1"><span class="c2">Map&lt;String, String&gt; atts = new HashMap&lt;String, String&gt;();</span></p><p class="c1"><span class="c2">stts.put(&quot;attName1&quot;, &quot;attValue1&quot;);</span></p><p class="c1"><span class="c2">stts.put(&quot;attName2&quot;, &quot;attValue2&quot;);</span></p><p class="c1"><span class="c2">stts.put(&quot;attName3&quot;, &quot;attValue3&quot;);</span></p><p class="c1"><span class="c2">object1.setAttributes(atts);</span></p><p class="c6 c1"><span class="c2"></span></p><p class="c1"><span>All the attributes of an object can also be retrieved in a single operation with getAttributes.</span></p><p class="c6 c1"><span></span></p><p class="c1"><span class="c2">Map&lt;String, String&gt; atts = object1.getAttributes();</span></p><h1 class="c1"><a name="h.55nsqs42ifv5"></a><span>Deleting a Digital Object</span></h1><p class="c1"><span>You can either call the delete method on an instance of the Digital Object or you can call the delete method on the instance of Repository passing in the id of the object.</span></p><p class="c6 c1"><span></span></p><p class="c1"><span class="c2">object1.delete();</span></p><p class="c1"><span class="c2">repository.deleteDigitalObject(&quot;object1&quot;);</span></p><h1 class="c1"><a name="h.8o3c18c96d1o"></a><span>Storing Data in a Digital Object</span></h1><p class="c1"><span>In addition to attributes a Digital Object can also hold multiple data elements. A data element contains an arbitrary list of bytes and has methods for reading and writing to it.</span></p><p class="c6 c1"><span></span></p><p class="c1"><span class="c2">DataElement element = object1.createDataElement(&quot;elementName&quot;); </span></p><p class="c6 c1"><span></span></p><p class="c1"><span>To write to a data element call its write method passing in an InputStream.</span></p><p class="c6 c1"><span class="c2"></span></p><p class="c1"><span class="c2">FileInputStream fileIn = new FileInputStream(new File(&quot;/Users/test/documentation.pdf&quot;));</span></p><p class="c1"><span class="c2">element.write(fileIn);</span></p><p class="c6 c1"><span></span></p><p class="c1"><span>In the above example a local file is accessed with a FileInputStream and written to a Digital Objects data element. Note that the DataElement.write() method takes any InputStrea</span><span>m. </span></p><p class="c6 c1"><span></span></p><p class="c1"><span>Each data element has its own set of attributes that can be accessed in a similar way to the attributes on a DigitalObject.</span></p><p class="c6 c1"><span></span></p><p class="c1"><span class="c2">element.setAttribute(&quot;attributeName&quot;, &quot;attributeValue&quot;);</span></p><h1 class="c1"><a name="h.b7xrrexj1w9l"></a><span>Reading Data from a Digital Object</span></h1><p class="c1"><span>Calling the read method on a DataElement returns an InputStream which can be read from in the usual way. </span></p><p class="c6 c1"><span class="c2"></span></p><p class="c1"><span class="c2">InputStream in = element.read();</span></p><h1 class="c1"><a name="h.ofrf6lzcfkh"></a><span>Searching the Repository</span></h1><p class="c1"><span>Objects stored in a repository are indexed and searchable. It is possible to query the repository using the lucene query syntax and while some more advanced search operations are available with the lucene query syntax the prefered method is to construct a Query object.</span></p><p class="c6 c1"><span class="c2"></span></p><p class="c1"><span class="c2">DigitalObject mercury = repository.createDigitalObject(&quot;mercury&quot;);</span></p><p class="c1"><span class="c2">mercury.setAttribute(&quot;name&quot;, &quot;mercury&quot;);</span></p><p class="c1"><span class="c2">mercury.setAttribute(&quot;temp&quot;, &quot;900&quot;);</span></p><p class="c1"><span class="c2">mercury.setAttribute(&quot;haswater&quot;, &quot;false&quot;);</span></p><p class="c1"><span class="c2">mercury.setAttribute(&quot;hasLife&quot;, &quot;false&quot;);</span></p><p class="c1"><span class="c2">mercury.setAttribute(&quot;tooHot&quot;, &quot;true&quot;);</span></p><p class="c1"><span class="c2">mercury.setAttribute(&quot;tooCold&quot;, &quot;false&quot;);</span></p><p class="c6 c1"><span class="c2"></span></p><p class="c1"><span class="c2">DigitalObject venus = repository.createDigitalObject(&quot;venus&quot;);</span></p><p class="c1"><span class="c2">venus.setAttribute(&quot;name&quot;, &quot;venus&quot;);</span></p><p class="c1"><span class="c2">venus.setAttribute(&quot;temp&quot;, &quot;400&quot;);</span></p><p class="c1"><span class="c2">venus.setAttribute(&quot;haswater&quot;, &quot;false&quot;);</span></p><p class="c1"><span class="c2">venus.setAttribute(&quot;hasAtmos&quot;, &quot;true&quot;);</span></p><p class="c1"><span class="c2">venus.setAttribute(&quot;hasLife&quot;, &quot;false&quot;);</span></p><p class="c1"><span class="c2">venus.setAttribute(&quot;tooHot&quot;, &quot;true&quot;);</span></p><p class="c1"><span class="c2">venus.setAttribute(&quot;tooCold&quot;, &quot;false&quot;);</span></p><p class="c1"><span class="c2">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p><p class="c1"><span class="c2">DigitalObject earth = repository.createDigitalObject(&quot;earth&quot;);</span></p><p class="c1"><span class="c2">earth.setAttribute(&quot;name&quot;, &quot;earth&quot;);</span></p><p class="c1"><span class="c2">earth.setAttribute(&quot;temp&quot;, &quot;40&quot;);</span></p><p class="c1"><span class="c2">earth.setAttribute(&quot;haswater&quot;, &quot;true&quot;);</span></p><p class="c1"><span class="c2">earth.setAttribute(&quot;hasAtmos&quot;, &quot;true&quot;);</span></p><p class="c1"><span class="c2">earth.setAttribute(&quot;hasLife&quot;, &quot;true&quot;);</span></p><p class="c1"><span class="c2">earth.setAttribute(&quot;tooHot&quot;, &quot;false&quot;);</span></p><p class="c1"><span class="c2">earth.setAttribute(&quot;tooCold&quot;, &quot;false&quot;);</span></p><p class="c1"><span class="c2">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p><p class="c1"><span class="c2">DigitalObject mars = repository.createDigitalObject(&quot;mars&quot;);</span></p><p class="c1"><span class="c2">mars.setAttribute(&quot;name&quot;, &quot;mars&quot;);</span></p><p class="c1"><span class="c2">mars.setAttribute(&quot;temp&quot;, &quot;-60&quot;);</span></p><p class="c1"><span class="c2">mars.setAttribute(&quot;haswater&quot;, &quot;true&quot;);</span></p><p class="c1"><span class="c2">mars.setAttribute(&quot;hasAtmos&quot;, &quot;true&quot;);</span></p><p class="c1"><span class="c2">mars.setAttribute(&quot;hasLife&quot;, &quot;false&quot;);</span></p><p class="c1"><span class="c2">mars.setAttribute(&quot;tooHot&quot;, &quot;false&quot;);</span></p><p class="c1"><span class="c2">mars.setAttribute(&quot;tooCold&quot;, &quot;true&quot;);</span></p><h2 class="c1"><a name="h.mt0lonlieda3"></a><span>AttributeQuery</span></h2><p class="c1"><span>The most basic query is the AttributeQuery. Searching a repository with an attribute query will return an iterator over Digital Objects that have the specified attribute with the specified value.</span></p><p class="c6 c1"><span></span></p><p class="c1"><span class="c2">Query hasWater = new AttributeQuery(&quot;haswater&quot;, &quot;false&quot;)</span></p><p class="c1"><span class="c2">CloseableIterator&lt;DigitalObject&gt; resultsIter = repository.search(hasWater);</span></p><p class="c1"><span class="c2">while(resultsIter.hasNext()) {</span></p><p class="c1 c9"><span class="c2">DigitalObject dobj = resultsIter.next();</span></p><p class="c1"><span class="c2">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(dobj.getHandle());</span></p><p class="c1"><span class="c2">}</span></p><p class="c1"><span class="c2">resultsIter.close();</span></p><p class="c6 c1"><span></span></p><p class="c1"><span>In this example the search will return the DigitalObjects mercury and venus.</span></p><h2 class="c1"><a name="h.xys20vquevzo"></a><span>BooleanQuery</span></h2><p class="c1"><span>A BooleanQuery is a way of combining multiple queries together along with BooleanClauses. </span></p><p class="c6 c1"><span></span></p><p class="c1"><span class="c2">AttributeQuery hasWater = new AttributeQuery(&quot;haswater&quot;, &quot;true&quot;);</span></p><p class="c1"><span class="c2">AttributeQuery hasAtmos = new AttributeQuery(&quot;hasAtmos&quot;, &quot;true&quot;);</span></p><p class="c1"><span class="c2">AttributeQuery tooHot = new AttributeQuery(&quot;tooHot&quot;, &quot;true&quot;);</span></p><p class="c1"><span class="c2">AttributeQuery tooCold = new AttributeQuery(&quot;tooCold&quot;, &quot;true&quot;);</span></p><p class="c1"><span class="c2">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p><p class="c1"><span class="c2">List&lt;BooleanClause&gt; conditionsForLife = new ArrayList&lt;BooleanClause&gt;();</span></p><p class="c1"><span class="c2">conditionsForLife.add(new BooleanClause(hasWater, BooleanClause.Occur.MUST));</span></p><p class="c1"><span class="c2">conditionsForLife.add(new BooleanClause(hasAtmos, BooleanClause.Occur.MUST));</span></p><p class="c1"><span class="c2">conditionsForLife.add(new BooleanClause(tooHot, BooleanClause.Occur.MUST_NOT));</span></p><p class="c1"><span class="c2">conditionsForLife.add(new BooleanClause(tooCold, BooleanClause.Occur.MUST_NOT));</span></p><p class="c1 c6"><span class="c2"></span></p><p class="c1"><span class="c2">BooleanQuery conditionsForLifeQ = new BooleanQuery(conditionsForLife);</span></p><p class="c1"><span class="c2">CloseableIterator&lt;DigitalObject&gt; resultsIter = repository.search(conditionsForLifeQ);</span></p><p class="c6 c1"><span></span></p><p class="c1"><span>In this example we create four AttributeQueries. Each AttributeQuery is wrapped in a BooleanClause which is used to indicate if the query MUST, SHOULD or MUST_NOT occur in the results. This is modeled on the programmatic API for Lucine where a BooleanQuery will match an object if and only if it matches every MUST subquery; it matches at least one SHOULD subquery (or there is no such subquery); and it matches no MUST_NOT subquery.</span></p><h2 class="c1"><a name="h.6tf3ukskrvab"></a><span>RawQuery</span></h2><p class="c1"><span>A RawQuery allows you to create a Query object using the Lucene query syntax. For example the same conditions for life query shown above could be expressed as a RawQuery like this:</span></p><p class="c6 c1"><span></span></p><p class="c1"><span class="c2">String queryString = </span></p><p class="c1"><span class="c2">&quot;objatt_haswater:true AND objatt_hasAtmos:true NOT objatt_tooHot:true NOT objatt_tooCold:true&quot;</span></p><p class="c6 c1"><span class="c2"></span></p><p class="c1"><span class="c2">Query rawConditionsForLifeQ = new RawQuery(queryString);</span></p><p class="c1"><span class="c2">CloseableIterator&lt;DigitalObject&gt; resultsIter = repository.search(rawConditionsForLifeQ);</span></p><h2 class="c1"><a name="h.htxloyihoiqi"></a><span>ElementAttributeQuery</span></h2><p class="c1"><span>The ElementAttributeQuery is similar to an AttributeQuery but searches the attributes on DataElements rather than the attributes on the DigitalObjects.</span></p><p class="c6 c1"><span></span></p><p class="c1"><span class="c2">Query q = new ElementAttributeQuery(&quot;elementName&quot;, &quot;attributeName&quot;, &quot;attributeValue&quot;);</span></p><p class="c1"><span class="c2">CloseableIterator&lt;DigitalObject&gt; resultsIter = repository.search(q);</span></p><h2 class="c1"><a name="h.p42rommhzr8y"></a><span>QueryParams</span></h2><p class="c1"><span>There exists an additional search method on Repository that takes a QueryParams object. The QueryParams object allows you to paginate results, restricting page size and specifying page number. </span></p><p class="c6 c1"><span></span></p><p class="c1"><span class="c2">Query q = new AttributeQuery(&quot;attributeName&quot;, &quot;attributeValue&quot;);</span></p><p class="c1"><span class="c2">int pageNum = 3;</span></p><p class="c1"><span class="c2">int pageSize = 10;</span></p><p class="c1"><span class="c2">QueryParams queryParams = new QueryParams(pageNum, pageSize, null);</span></p><p class="c1"><span class="c2">CloseableIterator&lt;DigitalObject&gt; resultsIter = repository.search(q, queryParams);</span></p><p class="c6 c1"><span class="c2"></span></p><p class="c1"><span>Where a pageNum of zero will return the first page.</span></p><p class="c6 c1"><span></span></p><p class="c1"><span>The optional 3rd parameter in a QueryParams object is a List&lt;String&gt; of sort fields. Where each string is an attribute name the results should be sorted by.</span></p><p class="c6 c1"><span></span></p><p class="c1"><span class="c2">Query q = new AttributeQuery(&quot;attributeName&quot;, &quot;attributeValue&quot;);</span></p><p class="c1"><span class="c2">int pageNum = 3;</span></p><p class="c1"><span class="c2">int pageSize = 10;</span></p><p class="c1"><span class="c2">List&lt;String&gt; sortFields = new ArrayList&lt;String&gt;();</span></p><p class="c1"><span class="c2">sortFields.add(&quot;size&quot;);</span></p><p class="c1"><span class="c2">sortFields.add(&quot;date&quot;);</span></p><p class="c1"><span class="c2">QueryParams queryParams = new QueryParams(pageNum, pageSize, sortFields);</span></p><p class="c1"><span class="c2">CloseableIterator&lt;DigitalObject&gt; resultsIter = repository.search(q, queryParams);</span></p><p class="c6 c1"><span class="c2"></span></p><p class="c6 c1"><span class="c2"></span></p></body></html>